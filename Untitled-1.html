
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
/* Reset Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  display: flex;
  flex-direction: column;
  font-family: Arial, sans-serif;
  background-color: #f9f9f9;
  z-index: 1000;
}
/* Sidebars */
.sidebar, .developer-sidebar {
  width: 250px;
  background-color: #002147;
  color: white;
  height: 100vh;
  padding: 20px;
  position: fixed;
  top: 0;
  transition: transform 0.3s ease-in-out;
}

.sidebar {
  left: 0;
}
.developer-sidebar {
  right: 0;
  text-align: center;
  z-index: 999;
}

/* Sidebar Heading */
.sidebar h2, .developer-sidebar h3 {
  font-size: 22px;
  margin-bottom: 20px;
  text-align: center;
}

/* Sidebar Menu */
.sidebar ul {
  list-style-type: none;
}
.sidebar ul li {
  margin-bottom: 15px;
}
.sidebar ul li a {
  display: block;
  text-decoration: none;
  color: white;
  font-size: 18px;
  background: #0056b3;
  padding: 12px;
  border-radius: 5px;
  text-align: center;
  transition: background 0.3s ease, transform 0.2s ease;
}
.sidebar ul li a:hover {
  background: #00bcd4;
  transform: translateY(-2px);
}
/* Main Content */
.main-content {
  flex: 1;
  padding: 20px;
  margin-left: 270px;
  margin-right: 270px;
  transition: margin 0.3s ease-in-out;
}

/* Reports Section */
.reports {
  display: flex;
  gap: 20px;
  margin-top: 30px;
  flex-wrap: wrap;
  justify-content: center;
}
.report-card {
  display: flex;
  flex-direction: column;
  background-color: #f8f1f1;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  max-width: 600px;
  margin: 20px auto;
}
.report-card h3 {
  color: #002147;
  margin-bottom: 20px;
  font-size: 1.5rem;
  text-align: center;
}
/* Dashboard Cards */
.dashboard-cards {
  display: flex;
  gap: 10px;
  margin-top: 20px;
  flex-wrap: wrap;
  justify-content: center;
}
.card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-decoration: none;
  color: black;
  background-color: rgb(196, 189, 189);
  padding: 15px;
  border-radius: 10px;
  text-align: center;
  width: 140px;
  height: 100px;
  box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  font-size: 14px;
  font-weight: bold;
  cursor: pointer;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.2);
  background-color: #aba4a4;
}
/* Enhanced Pop-up Modal */
.popup {
  display: none;
  position: fixed;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  width: 80%;
  max-width: 500px;
  background: white;
  box-shadow: 0px 4px 20px rgba(0, 0, 0, 0.3);
  border-radius: 10px;
  overflow: hidden;
  padding: 20px;
  text-align: center;
  z-index: 1001;
}
/* Draggable styles */
.popup .popup-header {
  padding: 10px;
  cursor: move;
  background-color: #f0f0f0;
  border-radius: 8px 8px 0 0;
  margin: -20px -20px 15px -20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.popup .popup-header h2 {
  margin: 0;
  font-size: 18px;
  color: #002147;
}

/* Close Button */
.popup-content {
  padding: 5px;
  text-align: left;
}

.cose-btn {
  font-size: 22px;
  cursor: pointer;
  color: #333;
}

.close-btn:hover {
  color: #ff4d4d;
}
.popup button {
  margin-top: 15px;
  padding: 8px 15px;
  border: none;
  background: #002147;
  color: white;
  border-radius: 5px;
  cursor: pointer;
}

.popup button:hover {
  background: #0056b3;
}

.popup .delete-btn {
  background: #d43f50;
}
.popup .delete-btn:hover {
  background: #ff4d4d;
}

/* Overlay styles */
#popup-overlay {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.5);
  z-index: 1000;
}

/* Logo preview styles */
.logo-preview {
  margin-top: 20px;
}

#current-logo {
  max-width: 100%;
  max-height: 200px;
  margin-top: 10px;
  display: block;
}

.settings-section {
  margin-bottom: 20px;
  padding-bottom: 20px;
  border-bottom: 1px solid #ccc;
}

/* Students List */
.students-list {
  max-height: 300px;
  overflow-y: auto;
  margin: 10px 0;
  border: 1px solid #eee;
  border-radius: 5px;
  padding: 5px;
}

.student-item {
  padding: 10px;
  border-bottom: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.student-item:last-child {
  border-bottom: none;
}

.student-item button {
  margin: 0 5px;
  padding: 5px 10px;
  font-size: 12px;
}

/* Table styles */
.data-table {
  width: 100%;
  border-collapse: collapse;
  margin: 10px 0;
}

.data-table th, .data-table td {
  padding: 8px;
  text-align: left;
  border: 1px solid #ddd;
}

.data-table th {
  background-color: #f2f2f2;
  font-weight: bold;
}

.data-table tr:nth-child(even) {
  background-color: #f9f9f9;
}

/* Responsive Design */
@media screen and (max-width: 768px) {
  /* Hide Sidebars */
  .sidebar, .developer-sidebar {
    transform: translateX(-100%);
    width: 230px;
  }

  .developer-sidebar {
    right: -100%;
    transform: translateX(100%);
  }

  /* Show Sidebars when Active */
  .sidebar.active, .developer-sidebar.active {
    transform: translateX(0);
  }

  /* Adjust Main Content */
  .main-content {
    margin-left: 0;
    margin-right: 0;
    padding: 15px;
  }

  /* Stack Dashboard Cards */
  .dashboard-cards {
    flex-direction: column;
    align-items: center;
  }

  .card {
    width: 80%;
    max-width: 220px;
    height: 90px;
    font-size: 13px;
    padding: 10px;
  }

  /* Pop-up adjustments for small screens */
  .popup {
    width: 90%;
    max-width: none;
    padding: 15px;
    font-size: 14px;
  }

  .popup-content {
    padding: 10px;
    font-size: 13px;
  }

  .close-btn {
    font-size: 16px;
    top: 8px;
    right: 10px;
  }

  .popup button {
    font-size: 13px;
    padding: 7px 10px;
  }
}

@media screen and (max-width: 600px) {
  /* Even smaller adjustments */
  .popup {
    width: 95%;
    padding: 12px;
  }

  .popup-content {
    padding: 8px;
    font-size: 12px;
  }

  .close-btn {
    font-size: 14px;
  }

  .popup button {
    font-size: 12px;
    padding: 6px 10px;
  }
}
</style>
  <title>School Fees Payment System</title>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>School Payment</h2>
    <ul>
      <li><a href="#" onclick="openPopup('dashboard-popup')">Dashboard</a></li>
      <li><a href="#" onclick="openPopup('students-popup')">Students</a></li>
      <li><a href="#" onclick="openPopup('fees-popup')">Fees</a></li>
      <li><a href="#" onclick="openPopup('reports-popup')">Reports</a></li>
      <li><a href="#" onclick="openPopup('settings-popup')">Settings</a></li>
      <li><a href="#" onclick="confirmLogout()">Log out</a></li>
    </ul>
  </div>

  <!-- Overlay Background -->
  <div id="popup-overlay" onclick="closeAllPopups()"></div>

  <!-- Settings Pop-up -->
  <div id="settings-popup" class="popup">
    <div class="popup-header">
      <h2>Settings</h2>
      <span class="close-btn" onclick="closePopup('settings-popup')">&times;</span>
    </div>
    <div class="popup-content">
      <div class="settings-section">
        <h3>School Logo Settings</h3>
        <label for="logo-upload">Upload New School Logo:</label>
        <input type="file" id="logo-upload" accept="image/*" />
        <button onclick="saveLogo()">Save Logo</button>

        <div class="logo-preview" id="logo-preview">
          <strong>Current Logo:</strong>
          <img id="current-logo" src="n.jpeg" alt="School Logo" />
        </div>
      </div>
      
      <div class="settings-section">
        <h3>System Settings</h3>
        <label>
          <input type="checkbox" id="dark-mode"> Enable Dark Mode
        </label><br>
        <label>
          <input type="checkbox" id="notifications"> Enable Notifications
        </label>
      </div>
    </div>
    
    <button onclick="closePopup('settings-popup')">Close</button>
  </div>

  <!-- Dashboard Popup -->
  <div id="dashboard-popup" class="popup">
    <div class="popup-header">
      <h2>Dashboard</h2>
      <span class="close-btn" onclick="closePopup('dashboard-popup')">&times;</span>
    </div>
    <div class="popup-content">
      <h3>School Overview</h3>
      <p>Welcome to the school payment system dashboard. Here you can manage all aspects of student fee collection and reporting.</p>
      
      <h4>Key Statistics</h4>
      <ul>
        <li>Total Students: 159</li>
        <li>Fees Collected: Rs. 190,635</li>
        <li>Pending Collection: Rs. 839,458</li>
      </ul>
    </div>
    <button onclick="closePopup('dashboard-popup')">Close</button>
  </div>

  <!-- Students Popup -->
  <div id="students-popup" class="popup">
    <div class="popup-header">
      <h2>Students Management</h2>
      <span class="close-btn" onclick="closePopup('students-popup')">&times;</span>
    </div>
    <div class="popup-content">
      <h3>Student List</h3>
      <div class="students-list">
        <div class="student-item">
          <span>John Doe (Class 10A)</span>
          <div>
            <button onclick="openStudentDetails('John Doe', '10A')">Details</button>
            <button class="delete-btn" onclick="confirmDelete('John Doe')">Delete</button>
          </div>
        </div>
        <div class="student-item">
          <span>Jane Smith (Class 9B)</span>
          <div>
            <button onclick="openStudentDetails('Jane Smith', '9B')">Details</button>
            <button class="delete-btn" onclick="confirmDelete('Jane Smith')">Delete</button>
          </div>
        </div>
        <div class="student-item">
          <span>Mark Johnson (Class 11C)</span>
          <div>
            <button onclick="openStudentDetails('Mark Johnson', '11C')">Details</button>
            <button class="delete-btn" onclick="confirmDelete('Mark Johnson')">Delete</button>
          </div>
        </div>
        <div class="student-item">
          <span>Sarah Williams (Class 8A)</span>
          <div>
            <button onclick="openStudentDetails('Sarah Williams', '8A')">Details</button>
            <button class="delete-btn" onclick="confirmDelete('Sarah Williams')">Delete</button>
          </div>
        </div>
      </div>
      <button onclick="openPopup('add-student-popup')">Add New Student</button>
    </div>
    <button onclick="closePopup('students-popup')">Close</button>
  </div>

  <!-- Add Student Popup -->
  <div id="add-student-popup" class="popup">
    <div class="popup-header">
      <h2>Add New Student</h2>
      <span class="close-btn" onclick="closePopup('add-student-popup')">&times;</span>
    </div>
    <div class="popup-content">
      <form id="add-student-form">
        <div style="margin-bottom: 10px;">
          <label for="student-name">Full Name:</label>
          <input type="text" id="student-name" style="width: 100%; padding: 8px; margin-top: 5px;" required>
        </div>
        
        <div style="margin-bottom: 10px;">
          <label for="student-class">Class:</label>
          <input type="text" id="student-class" style="width: 100%; padding: 8px; margin-top: 5px;" required>
        </div>
        
        <div style="margin-bottom: 10px;">
          <label for="student-dob">Date of Birth:</label>
          <input type="date" id="student-dob" style="width: 100%; padding: 8px; margin-top: 5px;" required>
        </div>
        
        <div style="margin-bottom: 10px;">
          <label for="parent-contact">Parent Contact:</label>
          <input type="tel" id="parent-contact" style="width: 100%; padding: 8px; margin-top: 5px;" required>
        </div>
      </form>
      <button onclick="addStudent()">Save Student</button>
      <button onclick="closePopup('add-student-popup')">Cancel</button>
    </div>
  </div>
  <!-- Student Details Popup -->
  <div id="student-details-popup" class="popup">
    <div class="popup-header">
      <h2>Student Details</h2>
      <span class="close-btn" onclick="closePopup('student-details-popup')">&times;</span>
    </div>
    <div class="popup-content">
      <div id="student-info">
        <!-- This will be populated dynamically -->
      </div>
      <h3>Fee History</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>Date</th>
            <th>Amount (Rs.)</th>
            <th>Payment Type</th>
            <th>Receipt No.</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>12 Jan 2025</td>
            <td>5,000</td>
            <td>Bank Transfer</td>
            <td>BT2025001</td>
          </tr>
          <tr>
            <td>05 Feb 2025</td>
            <td>3,500</td>
            <td>Cash</td>
            <td>CS2025042</td>
          </tr>
        </tbody>
      </table>
      
      <h3>Balance: Rs. 16,500</h3>
      <button onclick="openPopup('make-payment-popup')">Make Payment</button>
    </div>
    <button onclick="closePopup('student-details-popup')">Close</button>
  </div>

  <!-- Make Payment Popup -->
  <div id="make-payment-popup" class="popup">
    <div class="popup-header">
      <h2>Make Payment</h2>
      <span class="close-btn" onclick="closePopup('make-payment-popup')">&times;</span>
    </div>
    <div class="popup-content">
      <h3>Student: <span id="payment-student-name">John Doe</span></h3>
      <h4>Current Balance: Rs. 16,500</h4>
      
      <form id="payment-form">
        <div style="margin-bottom: 10px;">
          <label for="payment-amount">Amount:</label>
          <input type="number" id="payment-amount" style="width: 100%; padding: 8px; margin-top: 5px;" required>
        </div>
        
        <div style="margin-bottom: 10px;">
          <label for="payment-method">Payment Method:</label>
          <select id="payment-method" style="width: 100%; padding: 8px; margin-top: 5px;" required>
            <option value="cash">Cash</option>
            <option value="bank">Bank Transfer</option>
            <option value="check">Check</option>
            <option value="online">Online Payment</option>
          </select>
        </div>
        
        <div style="margin-bottom: 10px;">
          <label for="payment-date">Date:</label>
          <input type="date" id="payment-date" style="width: 100%; padding: 8px; margin-top: 5px;" required>
        </div>
        
        <div style="margin-bottom: 10px;">
          <label for="payment-notes">Notes:</label>
          <textarea id="payment-notes" style="width: 100%; padding: 8px; margin-top: 5px; height: 60px;"></textarea>
        </div>
      </form>
      
      <button onclick="processPayment()">Process Payment</button>
      <button onclick="closePopup('make-payment-popup')">Cancel</button>
    </div>
  </div>

  <!-- Fees Popup -->
  <div id="fees-popup" class="popup">
    <div class="popup-header">
      <h2>Fees Management</h2>
      <span class="close-btn" onclick="closePopup('fees-popup')">&times;</span>
    </div>
    <div class="popup-content">
      <h3>Fee Structure</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>Class</th>
            <th>Tuition (Rs.)</th>
            <th>Development (Rs.)</th>
            <th>Activities (Rs.)</th>
            <th>Total (Rs.)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Class 8</td>
            <td>20,000</td>
            <td>2,500</td>
            <td>2,000</td>
            <td>24,500</td>
          </tr>
          <tr>
            <td>Class 9</td>
            <td>22,000</td>
            <td>2,500</td>
            <td>2,000</td>
            <td>26,500</td>
          </tr>
          <tr>
            <td>Class 10</td>
            <td>25,000</td>
            <td>3,000</td>
            <td>2,500</td>
            <td>30,500</td>
          </tr>
          <tr>
            <td>Class 11</td>
            <td>28,000</td>
            <td>3,500</td>
            <td>3,000</td>
            <td>34,500</td>
          </tr>
          <tr>
            <td>Class 12</td>
            <td>30,000</td>
            <td>4,000</td>
            <td>3,500</td>
            <td>37,500</td>
          </tr>
        </tbody>
      </table>
      <button onclick="openPopup('edit-fees-popup')">Edit Fee Structure</button>
    </div>
    <button onclick="closePopup('fees-popup')">Close</button>
  </div>

  <!-- Reports Popup -->
  <div id="reports-popup" class="popup">
    <div class="popup-header">
      <h2>Reports</h2>
      <span class="close-btn" onclick="closePopup('reports-popup')">&times;</span>
    </div>
    <div class="popup-content">
      <h3>Fee Collection Report</h3>
      <div>
        <label for="report-month">Select Month:</label>
        <select id="report-month" style="padding: 5px; margin: 10px 0;">
          <option value="january">January 2025</option>
          <option value="february">February 2025</option>
          <option value="march" selected>March 2025</option>
        </select>
      </div>
      
      <table class="data-table">
        <thead>
          <tr>
            <th>Class</th>
            <th>Total Students</th>
            <th>Total Fees (Rs.)</th>
            <th>Collected (Rs.)</th>
            <th>Balance (Rs.)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Class 8</td>
            <td>32</td>
            <td>784,000</td>
            <td>352,800</td>
            <td>431,200</td>
          </tr>
          <tr>
            <td>Class 9</td>
            <td>28</td>
            <td>742,000</td>
            <td>296,800</td>
            <td>445,200</td>
          </tr>
          <tr>
            <td>Class 10</td>
            <td>35</td>
            <td>1,067,500</td>
            <td>320,250</td>
            <td>747,250</td>
          </tr>
          <tr>
            <td>Class 11</td>
            <td>30</td>
            <td>1,035,000</td>
            <td>414,000</td>
            <td>621,000</td>
          </tr>
          <tr>
            <td>Class 12</td>
            <td>34</td>
            <td>1,275,000</td>
            <td>382,500</td>
            <td>892,500</td>
          </tr>
        </tbody>
      </table>
      <button onclick="generateReport()">Generate PDF Report</button>
    </div>
    <button onclick="closePopup('reports-popup')">Close</button>
  </div>

  <!-- Fees Balance Popup -->
  <div id="fees-balance-popup" class="popup">
    <div class="popup-header">
      <h2>Fees Balance</h2>
      <span class="close-btn" onclick="closePopup('fees-balance-popup')">&times;</span>
    </div>
    <div class="popup-content">
      <h3>Outstanding Fees</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>Class</th>
            <th>Total Outstanding (Rs.)</th>
            <th>Students with Balance</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Class 8</td>
            <td>431,200</td>
            <td>24</td>
          </tr>
          <tr>
            <td>Class 9</td>
            <td>445,200</td>
            <td>21</td>
          </tr>
          <tr>
            <td>Class 10</td>
            <td>747,250</td>
            <td>30</td>
          </tr>
          <tr>
            <td>Class 11</td>
            <td>621,000</td>
            <td>23</td>
          </tr>
          <tr>
            <td>Class 12</td>
            <td>892,500</td>
            <td>28</td>
          </tr>
        </tbody>
      </table>
      <button onclick="openPopup('send-reminders-popup')">Send Payment Reminders</button>
    </div>
    <button onclick="closePopup('fees-balance-popup')">Close</button>
  </div>

  <!-- Lost Items Popup -->
  <div id="lost-items-popup" class="popup">
    <div class="popup-header">
      <h2>Lost Items</h2>
      <span class="close-btn" onclick="closePopup('lost-items-popup')">&times;</span>
    </div>
    <div class="popup-content">
      <h3>Recently Reported Lost Items</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>Item</th>
            <th>Reported By</th>
            <th>Date</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Mathematics Textbook</td>
            <td>John Doe (10A)</td>
            <td>28 Mar 2025</td>
            <td>Not Found</td>
          </tr>
          <tr>
            <td>Blue Water Bottle</td>
            <td>Jane Smith (9B)</td>
            <td>25 Mar 2025</td>
            <td>Found</td>
          </tr>
          <tr>
            <td>School Blazer</td>
            <td>Mark Johnson (11C)</td>
            <td>20 Mar 2025</td>
            <td>Not Found</td>
          </tr>
        </tbody>
      </table>
      <button onclick="openPopup('report-lost-item-popup')">Report New Lost Item</button>
    </div>
    <button onclick="closePopup('lost-items-popup')">Close</button>
  </div>

  <!-- Broken Window Popup -->
  <div id="repairs-popup" class="popup">
    <div class="popup-header">
      <h2>Repairs & Maintenance</h2>
      <span class="close-btn" onclick="closePopup('repairs-popup')">&times;</span>
    </div>
    <div class="popup-content">
      <h3>Reported Issues</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>Issue</th>
            <th>Location</th>
            <th>Reported On</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Broken Window</td>
            <td>Class 10A</td>
            <td>30 Mar 2025</td>
            <td>Pending</td>
          </tr>
          <tr>
            <td>Leaking Tap</td>
            <td>Boys Washroom 2</td>
            <td>28 Mar 2025</td>
            <td>Scheduled</td>
          </tr>
          <tr>
            <td>Flickering Light</td>
            <td>Library</td>
            <td>25 Mar 2025</td>
            <td>Completed</td>
          </tr>
        </tbody>
      </table>
      <button onclick="openPopup('report-issue-popup')">Report New Issue</button>
    </div>
    <button onclick="closePopup('repairs-popup')">Close</button>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <header>
      <button class="toggle-btn" onclick="toggleSidebar()">‚ò∞ Menu</button>
      <h1>Welcome, <span class="highlight">Cori</span></h1>
    </header>

    <!-- Quick Actions -->
    <section class="dashboard-cards">
      <div class="card" onclick="openPopup('fees-balance-popup')">
        <span>üí¨</span> Fees Balance
      </div>
      <div class="card" onclick="openPopup('reports-popup')">
        <span>üë®‚Äçüè´</span> Reports
      </div>
      <div class="card" onclick="openPopup('students-popup')">
        <span>üéì</span> Students
      </div>
      <div class="card" onclick="openPopup('lost-items-popup')">
        <span>üìö</span> Lost items
      </div>
      <div class="card" onclick="openPopup('repairs-popup')">
        <span>ü™ûüî®</span> Broken window
      </div>

<!-- Developer Sidebar (for future development info) -->
<div class="developer-sidebar">
  <h3>Developer Notes</h3>
  <p>Version: 1.0.2</p>
  <p>Last Updated: March 30, 2025</p>
  <p>Contact: dev@schoolpayments.com</p>
</div>

</div>

<script>
      // Popup and Sidebar Functions
function openPopup(popupId) {
  // Close all other popups first
  closeAllPopups();
  
  // Show overlay and popup
  document.getElementById('popup-overlay').style.display = 'block';
  document.getElementById(popupId).style.display = 'block';
}

function closePopup(popupId) {
  document.getElementById(popupId).style.display = 'none';
  document.getElementById('popup-overlay').style.display = 'none';
}

function closeAllPopups() {
  // Get all popup elements
  const popups = document.querySelectorAll('.popup');
  
  // Hide all popups
  popups.forEach(popup => {
    popup.style.display = 'none';
  });
  
  // Hide overlay
  document.getElementById('popup-overlay').style.display = 'none';
}

function toggleSidebar() {
  const sidebar = document.querySelector('.sidebar');
  sidebar.classList.toggle('active');
  
  // Adjust main content margin
  const mainContent = document.querySelector('.main-content');
  if (sidebar.classList.contains('active')) {
    mainContent.style.marginLeft = '250px';
  } else {
    mainContent.style.marginLeft = '0';
  }
}

// Student Management Functions
function openStudentDetails(name, className) {
  // Set student info in the popup
  const studentInfo = document.getElementById('student-info');
  studentInfo.innerHTML = `
    <h3>${name}</h3>
    <p><strong>Class:</strong> ${className}</p>
    <p><strong>Admission No:</strong> A-${Math.floor(1000 + Math.random() * 9000)}</p>
    <p><strong>Parent:</strong> ${name.split(' ')[0]}'s Parent</p>
    <p><strong>Contact:</strong> +91 98765-${Math.floor(10000 + Math.random() * 90000)}</p>
  `;
  
  // Update payment student name
  document.getElementById('payment-student-name').textContent = name;
  
  // Open student details popup
  closePopup('students-popup');
  openPopup('student-details-popup');
}

function confirmDelete(name) {
  if (confirm(`Are you sure you want to delete ${name} from the system?`)) {
    alert(`${name} has been deleted from the system.`);
    // Here you would normally handle the actual deletion
  }
}

function addStudent() {
  const name = document.getElementById('student-name').value;
  const className = document.getElementById('student-class').value;
  
  if (name && className) {
    alert(`New student ${name} added to Class ${className}`);
    closePopup('add-student-popup');
    // Here you would normally handle the actual student addition
  } else {
    alert('Please fill in all required fields');
  }
}

// Payment Functions
function processPayment() {
  const amount = document.getElementById('payment-amount').value;
  const method = document.getElementById('payment-method').value;
  
  if (amount) {
    alert(`Payment of Rs. ${amount} processed successfully through ${method}!`);
    closePopup('make-payment-popup');
    closePopup('student-details-popup');
    // Here you would normally handle the actual payment processing
  } else {
    alert('Please enter a valid amount');
  }
}

// Reports Functions
function generateReport() {
  const month = document.getElementById('report-month').value;
  alert(`Generating PDF report for ${month}... Report sent to your email.`);
  // Here you would normally handle the actual report generation
}

// Settings Functions
function saveLogo() {
  alert('School logo updated successfully!');
  // Here you would normally handle the actual logo change
}

// Logout Functions
function confirmLogout() {
  if (confirm('Are you sure you want to log out?')) {
    alert('You have been logged out successfully');
    // Here you would normally handle the actual logout
  }
}

// Make dropdowns work
document.addEventListener('DOMContentLoaded', function() {
  // Initialize date fields with current date
  const dateFields = document.querySelectorAll('input[type="date"]');
  const today = new Date().toISOString().split('T')[0];
  
  dateFields.forEach(field => {
    field.value = today;
  });
  
  // Make popups draggable
  const popupHeaders = document.querySelectorAll('.popup-header');
  
  popupHeaders.forEach(header => {
    let isDragging = false;
    let offsetX, offsetY;
    
    header.addEventListener('mousedown', function(e) {
      isDragging = true;
      const popup = header.parentElement;
      
      // Calculate the offset
      const rect = popup.getBoundingClientRect();
      offsetX = e.clientX - rect.left;
      offsetY = e.clientY - rect.top;
      
      // Prevent text selection during drag
      e.preventDefault();
    });
    
    document.addEventListener('mousemove', function(e) {
      if (!isDragging) return;
      
      const popup = header.parentElement;
      
      popup.style.left = (e.clientX - offsetX) + 'px';
      popup.style.top = (e.clientY - offsetY) + 'px';
      popup.style.transform = 'none'; // Remove the centering transform
    });
    
    document.addEventListener('mouseup', function() {
      isDragging = false;
    });
  });
});

// Handle logo preview
document.getElementById('logo-upload').addEventListener('change', function(e) {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('current-logo').src = e.target.result;
    };
    reader.readAsDataURL(file);
  }
});


  </script>
</body>
</html>